GreatReads
==========

GreatReads es una aplicación web para buscar libros, gestionar tu lista de lectura y hacer seguimiento del progreso de lectura.

0) Software que se necesita instalar
------------------------------------------------------
- Docker Desktop (v24 o superior recomendado)
- Navegador web moderno (Chrome, Firefox, Edge, etc.)

Nota para usuarios de Windows: Para que Docker funcione correctamente y los scripts internos puedan ejecutarse, es necesario tener WSL2 habilitado y ejecutar Docker Desktop con permisos adecuados.

Con Docker Desktop instalado, **no necesitas instalar Node.js, Python, MongoDB o MySQL** en tu máquina local, ya que todos los servicios se ejecutan dentro de contenedores.


1) Servicios que hay que arrancar
------------------------------------------------------
El proyecto está dividido en cuatro servicios, todos corriendo en contenedores Docker:

1. Frontend (greatReads_frontend)
   - Aplicación desarrollada en React + Vite
   - Puerto: 5173
   - URL: http://localhost:5173/

2. Gateway (gateway)
   - Servidor que actúa com intermediario entre frontend y microservicios
   - Puerto: 3000

3. User Service (user_service)
   - Servicio encargado de la gestión de usuarios, login y registro
   - Puerto: 3001

4. Book Service (book_service)
   - Servicio responsable de la búsqueda de libros y del seguimiento del progreso de lectura
   - Puerto: 3002

Además de estos cuatro servicios, existen dos contenedores internos de base de datos:
- MySQL (puerto interno 3306)
- MongoDB (puerto interno 27017)

Nota: Estos contenedores se levantan automáticamente mediante Docker Compose y no necesitan iniciarse manualmente.


2) Variables de entorno y bases de datos
------------------------------------------------------
Cada servicio necesita un archivo `.env` en su carpeta raíz con las variables de entorno correctas.

IMPORTANTE: Las variables que hacen referencia a bases de datos o a otros servicios deben apuntar a los nombres de contenedor definidos en Docker Compose, no a localhost.

**Book Service (book_service/.env):**
```
PORT=3002
MONGO_URI=mongodb://mongodb:27017/greatreads_books
JWT_SECRET=supersecret
```

**User Service (user_service/.env):**
```
PORT=3001
DB_PORT=3306
DB_HOST=mysql
DB_USER=root
DB_PASS=root
DB_NAME=greatreads_users_db
JWT_SECRET=supersecret
```

**Gateway (gateway/.env):**
```
PORT=3000
USER_SERVICE_URL=http://user_service:3001
BOOK_SERVICE_URL=http://book_service:3002
```

Los datos de las bases de datos se almacenan en volúmenes persistentes (mysql_data y mongo_data) y se mantendrán aunque se detengan los contenedores.

Si no configuras estos `.env`, los servicios **no arrancarán correctamente**.


3) Cómo levantar todo con Docker
------------------------------------------------------
1. Abre Docker Desktop y asegúrate de que está en ejecución.
2. Abre una terminal en la raíz del proyecto (donde está `docker-compose.yml`).
3. Ejecuta:
    docker compose up --build
4. Para detener los contenedores:
    docker compose down


4) Cómo acceder 
------------------------------------------------------
Una vez levantados los contenedores, puedes acceder a:

    Swagger (documentación de la API y pruebas de endpoints):
        http://localhost:3000/docs/

    Frontend (interfaz web):
        http://localhost:5173/

Desde ahí podrás:
- Buscar libros utilizando la API de Google Books
- Registrarte o iniciar sesión
- Consultar tu lista personal de lectura
- Añadir libros a tu lista
- Actualizar el estado de lectura
- Modificar el progreso de los libros marcados como "Leyendo"
- Eliminar libros de tu lista
- Ver información detallada de cada libro

5) Troubleshooting – Solución de problemas
------------------------------------------------------
- “unable to get image <nombre>”:
    Si al ejecutar docker compose up aparece un error indicando que no se puede obtener una imagen, normalmente se debe a que Docker Desktop no está abierto o no está en ejecución.
    Solución:
        1. Abrir Docker Desktop
        2. Esperar a que el motor de Docker esté iniciado
        3. Volver a ejecutar: docker compose up --build
        
- La URL “Network” de Vite no abre desde el navegador
    Al iniciar el contenedor frontend con Vite dentro de Docker, puede aparecer en la terminal una dirección de tipo “Network”, por ejemplo: http://172.x.x.x:5173/. Esto es completamente normal y esperado. Esa URL corresponde a la red interna creada por Docker Compose y solo es accesible desde otros contenedores.
    La única dirección válida para acceder al frontend desde tu equipo local es:
        http://localhost:5173/      

- Fallos de conexión entre servicios
    Si el gateway no puede comunicarse con user_service o book_service, revisa:
        - Que los archivos .env estén correctamente configurados
        - Que las URLs internas usen los nombres exactos de servicio
        - Que los puertos internos coincidan con los definidos en Docker Compose


